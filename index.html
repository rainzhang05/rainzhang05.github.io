<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rain Zhang</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="preload" href="fonts/Montserrat-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="fonts/Montserrat-Medium.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="fonts/Montserrat-Bold.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="stylesheet" href="css/main.css">
    <!-- JavaScript modules loaded in dependency order -->
    <script src="js/globals.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/preloader.js"></script>
    <script src="js/intro.js"></script>
    <script src="js/typewriter.js"></script>
    <script src="js/dock.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/contact.js"></script>
    <script src="js/projects.js"></script>
    <script src="js/main.js"></script>
</head>
<body class="intro-prep is-preloading">

<div id="preloader" role="status" aria-live="polite">
    <div class="preloader-spinner" aria-hidden="true"></div>
    <p class="preloader-text">Loading portfolio...</p>
</div>

<!-- Layout (Navigation & Decorations) -->
<div id="layout-container"></div>

<!-- Main Content Sections -->
<div id="introduction-container"></div>
<div id="skills-container"></div>
<div id="experience-container"></div>
<div id="projects-container"></div>
<div id="education-container"></div>
<div id="contact-container"></div>

<!-- Dock -->
<div id="dock-container"></div>

<script>
    // Load HTML sections dynamically
    async function loadSection(containerId, sectionPath) {
        try {
            const response = await fetch(sectionPath);
            if (!response.ok) throw new Error(`Failed to load ${sectionPath}`);
            const html = await response.text();
            document.getElementById(containerId).innerHTML = html;
        } catch (error) {
            console.error(`Error loading section: ${error.message}`);
        }
    }

    // Load all sections when DOM is ready
    document.addEventListener('DOMContentLoaded', async () => {
        // Load sections in order
        await Promise.all([
            loadSection('layout-container', 'html/layout.html'),
            loadSection('introduction-container', 'html/introduction.html'),
            loadSection('skills-container', 'html/skills.html'),
            loadSection('experience-container', 'html/experience.html'),
            loadSection('projects-container', 'html/projects.html'),
            loadSection('education-container', 'html/education.html'),
            loadSection('contact-container', 'html/contact.html'),
            loadSection('dock-container', 'html/dock.html')
        ]);

        // Dispatch event to notify that all sections are loaded
        document.dispatchEvent(new CustomEvent('sectionsLoaded'));
    });
</script>
</body>
</html>
